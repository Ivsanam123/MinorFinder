<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Branch and Dual Branch Form</title>
  <script>
    // Variables to store branch and opel values
    let branchValues = {
      CS: 0, MNC: 0, ECE: 0, EEE: 0, ENI: 0, MECH: 0, CHEM: 0, CIVIL: 0, PHARMA: 0
    };
    let dualBranchValues = {
      ECO: 0, MATH: 0, PHYSICS: 0, CHEMISTRY: 0, BIO: 0
    };
    let opelValues = {
      Aeronautics: 0, Entrepreneurship: 0, Finance: 0, MaterialSciences: 0, RoboticsAndAutomation: 0
    };

    function onBranchChange() {
      const branch = document.getElementById("branch").value;
      const likeBranch = document.getElementById("like-branch");
      const likeBranchQuestion = document.getElementById("like-branch-question");

      // Show or hide the like branch question
      if (branch) {
        likeBranchQuestion.style.display = "block";
      } else {
        likeBranchQuestion.style.display = "none";
      }
      likeBranch.value = ""; // Reset response
    }

    function onLikeBranchChange() {
      const branch = document.getElementById("branch").value;
      const likeBranch = document.getElementById("like-branch").value;

      // Set branch value based on response
      branchValues[branch] = likeBranch === "YES" ? 7.5 : 2.5;

      // Hide the temporary question
      document.getElementById("like-branch-question").style.display = "none";
    }

    function onDualBranchChange() {
      const dualBranch = document.getElementById("dual-branch").value;

      // Set dual branch value if selected, or reset if "None"
      if (dualBranch !== "None") {
        dualBranchValues[dualBranch] = 7.5;
      } else {
        Object.keys(dualBranchValues).forEach(key => dualBranchValues[key] = 0);
      }
    }

    function renderOtherBranches() {
      const container = document.getElementById("other-branches");
      container.innerHTML = ""; // Clear previous content

      const branchesToRate = Object.keys(branchValues)
        .filter(branch => branchValues[branch] !== 0 && branch !== "PHARMA" && branch !== "MNC");

      // Exclude CS and MATH if branch is MNC
      if (branchValues["MNC"] !== 0) {
        branchesToRate.splice(branchesToRate.indexOf("CS"), 1);
        branchesToRate.splice(branchesToRate.indexOf("MATH"), 1);
      }

      // Create radio buttons for each branch
      branchesToRate.forEach(branch => {
        const div = document.createElement("div");
        div.innerHTML = `<label>${branch}:</label>`;
        for (let i = 0; i <= 5; i++) {
          div.innerHTML += `
            <input type="radio" name="rate-${branch}" value="${i}" onclick="branchValues['${branch}'] = ${i};">
            ${i}`;
        }
        container.appendChild(div);
      });
    }

    function renderOpelOptions() {
      const container = document.getElementById("opel-options");
      container.innerHTML = ""; // Clear previous content

      const opels = ["Aeronautics", "Entrepreneurship", "Finance", "MaterialSciences", "RoboticsAndAutomation"];
      const dualBranch = document.getElementById("dual-branch").value;

      opels.forEach(opel => {
        // Skip Finance if ECO is selected
        if (dualBranch === "ECO" && opel === "Finance") return;

        const div = document.createElement("div");
        div.innerHTML = `<label>${opel}:</label>
          <input type="checkbox" name="opel-${opel}" value="No" onclick="opelValues['${opel}'] = 0;"> No
          <input type="checkbox" name="opel-${opel}" value="Maybe" onclick="opelValues['${opel}'] = 3;"> Maybe
          <input type="checkbox" name="opel-${opel}" value="Yes" onclick="opelValues['${opel}'] = 5;"> Yes`;
        container.appendChild(div);
      });
    }

    function validateForm() {
      const branch = document.getElementById("branch").value;
      const dualBranch = document.getElementById("dual-branch").value;

      if (!branch || !dualBranch) {
        alert("Please complete the first two questions.");
        return false;
      }

      renderOtherBranches();
      renderOpelOptions();
      return true;
    }

    function submitForm() {
      // Submit form logic here
      // Store branchValues, dualBranchValues, and opelValues in Python variables as required
      console.log("Branch Values:", branchValues);
      console.log("Dual Branch Values:", dualBranchValues);
      console.log("Opel Values:", opelValues);
    }
  </script>
</head>
<body>
  <h2>Branch and Dual Branch Form</h2>
  <form onsubmit="event.preventDefault(); submitForm();">

    <!-- Question 1: Branch -->
    <label for="branch">What is your branch?</label>
    <select id="branch" onchange="onBranchChange()">
      <option value="">Select your branch</option>
      <option value="CS">CS</option>
      <option value="MNC">MNC</option>
      <option value="ECE">ECE</option>
      <option value="EEE">EEE</option>
      <option value="ENI">ENI</option>
      <option value="MECH">MECH</option>
      <option value="CHEM">CHEM</option>
      <option value="CIVIL">CIVIL</option>
      <option value="PHARMA">PHARMA</option>
    </select>

    <!-- Like Branch Question -->
    <div id="like-branch-question" style="display: none;">
      <label>Do you like your branch?</label>
      <select id="like-branch" onchange="onLikeBranchChange()">
        <option value="">Select</option>
        <option value="YES">YES</option>
        <option value="NO">NO</option>
      </select>
    </div>

    <!-- Question 2: Dual Branch -->
    <label for="dual-branch">What is your Dual Branch?</label>
    <select id="dual-branch" onchange="onDualBranchChange()">
      <option value="None">None</option>
      <option value="ECO">ECO</option>
      <option value="MATH">MATH</option>
      <option value="PHYSICS">PHYSICS</option>
      <option value="CHEMISTRY">CHEMISTRY</option>
      <option value="BIO">BIO</option>
    </select>

    <!-- Question 3: Rate Other Branches -->
    <div id="other-branches"></div>

    <!-- Question 4: Opels -->
    <div id="opel-options"></div>

    <!-- Submit Button -->
    <button type="submit" onclick="validateForm()">Submit</button>

  </form>
</body>
</html>
